name: Telegram Auto Video Post

on:
  workflow_dispatch:
  schedule:
    - cron: '*/5 * * * *'   # 테스트: 5분마다(UTC 기준이지만 매 5분은 동일)

 workflow_dispatch:
jobs:
  post:
    runs-on: ubuntu-latest
    steps:
      - name: Send video by file_id
        env:
          TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          VIDEO_FILE_ID: ${{ secrets.TELEGRAM_VIDEO_FILE_ID }}
          CAPTION: ${{ secrets.TELEGRAM_CAPTION }}
        run: |
          curl -sS -X POST "https://api.telegram.org/bot${TOKEN}/sendVideo" \
            -d "chat_id=${CHAT_ID}" \
            -d "video=${VIDEO_FILE_ID}" \
            --data-urlencode "caption=${CAPTION}"
