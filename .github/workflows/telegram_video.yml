name: Telegram Auto Video Post

on:
  workflow_dispatch:
  schedule:
    - cron: '0 15,17,19,21,23,1,3,5,7,9,11,13 * * *'

jobs:
  post:
    runs-on: ubuntu-latest
    steps:
      - name: Send video by file_id
        env:
          TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          VIDEO_FILE_ID: ${{ secrets.TELEGRAM_VIDEO_FILE_ID }}
          CAPTION: ${{ secrets.TELEGRAM_CAPTION }}
        run: |
          curl -sS -X POST "https://api.telegram.org/bot${TOKEN}/sendVideo" \
            -d "chat_id=${CHAT_ID}" \
            -d "video=${VIDEO_FILE_ID}" \
            --data-urlencode "caption=${CAPTION}"
